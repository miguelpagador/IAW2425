<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>AJAX</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script>
        function unidadesLegibles(size){
            let unidades = ['bytes','KB','MB','GB','TB'];
            let ord = Math.floor(Math.log(size)/Math.log(1024));
            let s;
            ord = Math.min(Math.max(0,ord), unidades.length-1);
            s=Math.round((size/Math.pow(1024, ord))*100)/100;
            return s + ' ' + unidades[ord];
        }

        $(document).ready(function() {
            // Cargar el archivo JSON y mostrar sus datos
            $.getJSON('datos.json', function(data) {
                // Mostrar datos JSON (nombre, apellidos, edad)
                $('#jsonData').html(`
                    <h3>Datos del JSON</h3>
                    <p><strong>Nombre:</strong> ${data.nombre}</p>
                    <p><strong>Apellidos:</strong> ${data.apellidos}</p>
                    <p><strong>Edad:</strong> ${data.edad}</p>
                `);
            });

            // Cargar el archivo TXT y mostrar su contenido
            $.get('datos.txt', function(data) {
                $('#txtData').html(`
                    <h3>Contenido del TXT</h3>
                    <pre>${data}</pre>
                `);
            });

            // Mostrar tamaño de un archivo usando AJAX para obtener los datos de los enlaces
            $('.enlaces').click(function(event) {
                event.preventDefault(); // Evitar la navegación
                var fileUrl = $(this).attr('href');

                // Obtener el tamaño del archivo
                $.ajax({
                    url: fileUrl,
                    type: 'HEAD',
                    success: function(response, status, xhr) {
                        var fileSize = xhr.getResponseHeader('Content-Length');
                        var readableSize = unidadesLegibles(fileSize);
                        alert('El tamaño del archivo ' + fileUrl + ' es: ' + readableSize);
                    }
                });
            });
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
  </head>
  <body>
    <h1>Boletines oficiales del estado</h1>
    <div class="container">
        <p>Aquí tenemos una maravillosa biblioteca de archivos...</p>
        <ul>
            <li><a class="enlaces" href="BOE-A-2022-18812.pdf">BOE-A-2022-18812.pdf</a></li>
            <li><a class="enlaces" href="BOE-A-2022-18896.pdf">BOE-A-2022-18896.pdf</a></li>    
            <li><a class="enlaces" href="BOE-A-2022-19008.pdf">BOE-A-2022-19008.pdf</a></li>
            <li><a class="enlaces" href="BOE-A-2022-19085.pdf">BOE-A-2022-19085.pdf</a></li>
        </ul>
        
        <!-- Sección donde se muestran los datos del archivo JSON -->
        <div id="jsonData"></div>
        
        <!-- Sección donde se muestra el contenido del archivo TXT -->
        <div id="txtData"></div>
    </div>
  </body>
</html>
